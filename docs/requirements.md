# Shadow Speaking · 产品需求文档（PRD）

> 版本：v2.0
> 更新日期：2026-02-18
> 状态：待评审

---

## 一、产品定位

基于影子跟读法（Shadowing）的每日英语口语练习应用。用户输入的所有英文内容长期保存为个人语料库，系统每天自动编排为科学的跟读练习计划。

---

## 二、核心学习原则

以下五条原则来源于语言学实证研究，是产品所有功能设计的基石，不可违背。

| 编号 | 原则 | 研究依据 | 产品约束 |
|------|------|---------|---------|
| P1 | 先理解，再跟读 | Kadota（2007）：跟读本身已占满认知资源，无余力处理语义；不理解的跟读等于鹦鹉学舌 | 每条材料必须先通过「理解」阶段，才能进入跟读 |
| P2 | 韵律优先于逐字 | Hamada（2011）：影子跟读对语调和节奏改善最显著，韵律是主要作用机制 | 跟读的第一轮永远是韵律模仿，不要求逐字准确 |
| P3 | 交替优于死磕 | 交替练习（interleaving）效果优于集中重复（massed repetition），单条材料重复 5-10 遍后边际效益骤降 | 单条材料单次练习设重复上限，到达后自动切换下一条 |
| P4 | 必须出声，必须录音 | 不出声的跟读几乎无效；不录音则无法对比和发现问题 | 跟读阶段强制录音，检测静音时提示用户 |
| P5 | 从模仿走向自主 | 仅停留在模仿阶段无法形成真正口语能力 | 每条材料练习的最后环节必须是脱稿的自由表达 |

---

## 三、用户与场景

**目标用户：** 有基础英语阅读能力，希望提升口语流利度和发音自然度，缺乏系统练习方法的学习者。

**核心使用场景：**

| 场景 | 用户行为 | 系统响应 |
|------|---------|---------|
| 碎片时间收集素材 | 看到好的英文表达，快速输入 | 存入语料库，后台完成预处理 |
| 固定时间练习 | 打开"今日练习" | 展示已编排好的当日计划，按流程引导 |
| 想练特定场景（P1） | 输入场景描述 | 生成场景对话，存入语料库 |
| 查看学习成果 | 打开"我的进度" | 展示数据统计、录音对比、掌握分布 |

---

## 四、功能版本规划

### P0 — MVP（首个可用版本）

| 模块 | 包含功能 |
|------|---------|
| 内容输入 | 直接输入句子/段落 |
| 材料预处理 | 拆句、难度评定、音频生成、中文释义 |
| 每日计划 | 基于语料库 + 间隔复习自动生成当日计划 |
| 六阶段练习 | 完整的理解→精听→同步跟读→影子跟读→脱稿复述→自由表达流程 |
| 录音与回放 | 练习时录音，练习后回放对比 |
| 语料库管理 | 查看、搜索、删除已有语料 |
| 基础进度 | 今日完成度、连续练习天数 |
| 新用户引导 | 水平测试 + 首次练习引导 |
| 冷启动语料 | 系统预置基础语料包 |

### P1 — 增强版

| 模块 | 包含功能 |
|------|---------|
| 内容输入 | 笔记记录、英文日记（含润色建议） |
| 语料库管理 | 按主题/难度/状态筛选，编辑内容，导入/导出 |
| 场景生成 | 用户描述场景，系统生成英文对话 |
| 详细进度 | 各难度等级掌握分布、历史录音纵向对比 |
| 语调可视化 | 波形图展示用户录音与原音频的语调差异 |

### P2 — 远期

| 模块 | 包含功能 |
|------|---------|
| AI 语音评估 | 自动评分发音准确度、流利度、语调 |
| 云同步 | 跨设备数据同步 |

**以下所有需求描述以 P0 范围为主，P1/P2 功能仅简要提及。**

---

## 五、页面结构与导航

应用共包含以下页面：

```
首页（Tab 1：今日练习）
├── 今日练习列表
├── 练习详情 → 六阶段练习流程（全屏沉浸式）
└── 今日小结

输入（Tab 2：添加素材）
├── 快速输入
└── 输入确认（预览预处理结果）

语料库（Tab 3：我的语料）
├── 语料列表（搜索 + 筛选）
└── 语料详情（含历次练习记录）

我的（Tab 4：个人中心）
├── 学习进度总览
├── 设置（每日时长、水平调整）
└── 关于

登录/注册：
├── 登录页
└── 注册页

独立页面：
├── 新用户引导（水平测试 → 时长设定 → 首批输入 → 首次练习）
└── 冷启动语料包选择
```

---

## 六、数据实体与状态

### 6.1 数据实体关系

```
用户 (User)
 ├── 拥有一个 → 语料库 (Corpus)
 │    └── 包含多条 → 语料 (Material)
 │         ├── 包含多条 → 练习记录 (PracticeRecord)
 │         │    └── 包含多条 → 录音 (Recording)
 │         └── 包含一份 → 预处理结果 (ProcessedData)
 ├── 每天生成一份 → 每日计划 (DailyPlan)
 │    └── 包含多条 → 计划条目 (PlanItem) → 关联到语料
 └── 拥有一份 → 用户档案 (Profile)
```

### 6.2 语料（Material）属性

| 属性 | 说明 | 来源 |
|------|------|------|
| 原文 | 英文文本，一个完整的句子 | 用户输入（经拆句处理） |
| 来源类型 | 直接输入 / 笔记 / 场景生成 / 日记 | 系统标记 |
| 输入时间 | 加入语料库的时间 | 系统记录 |
| 难度等级 | L1 / L2 / L3 / L4 / L5 | 系统评定 |
| 主题标签 | 一个或多个标签 | 系统识别 + 用户可编辑 |
| 学习状态 | 未学习 / 学习中 / 已掌握 | 状态机流转 |
| 断句标记 | 句内自然停顿位置 | 系统生成 |
| 音频 | 慢速/常速/快速三个版本 | 系统生成 |
| 中文释义 | 整句中文翻译 | 系统生成 |
| 语音注释 | 连读/弱读/省音标注 | 系统生成 |
| 复习进度 | 已复习次数、下次复习日期 | 系统维护 |

### 6.3 语料状态流转

```
                    ┌──────────────────────────────┐
                    │                              │
                    ▼                              │
 ┌──────────┐   首次完成    ┌──────────┐   满足掌握条件   ┌──────────┐
 │  未学习   │ ──────────→ │  学习中   │ ─────────────→ │  已掌握   │
 └──────────┘  六阶段练习   └──────────┘                └──────────┘
                              │    ▲                       │
                              │    │                       │
                              │    └───────────────────────┘
                              │      复习表现不佳，重置间隔
                              │
                              └─── 按间隔复习计划反复出现
```

**状态流转规则：**

| 当前状态 | 触发条件 | 目标状态 |
|---------|---------|---------|
| 未学习 | 用户首次完成该材料的六阶段练习 | 学习中 |
| 学习中 | 满足全部掌握条件（见 6.4） | 已掌握 |
| 已掌握 | 在定期复习中表现不佳（见 6.5） | 学习中 |

### 6.4 掌握条件（全部满足才可判定为「已掌握」）

1. 已完成六阶段练习至少 1 次
2. 已通过至少 3 次间隔复习（跨越第 1 天、第 3 天、第 7 天三个节点）
3. 最近一次复习中，阶段五（脱稿复述）自评未选择"差距较大"

### 6.5 "表现不佳" 的判定

在复习练习中，出现以下任一情况：

- 用户在阶段四（影子跟读）第 3 轮中连续 3 秒以上未发声
- 用户在阶段五（脱稿复述）后自评选择了"差距较大"
- 用户在练习中途主动退出（未完成全部六阶段）

判定为表现不佳后，该材料的复习间隔重置为 1 天，重新进入密集复习周期。

### 6.6 用户档案（Profile）属性

| 属性 | 说明 | 初始值 |
|------|------|-------|
| 当前等级 | L1-L5 | 由水平测试确定 |
| 每日练习时长 | 10 / 20 / 30 分钟 | 用户选择 |
| 连续练习天数 | 整数 | 0 |
| 最长连续天数 | 整数 | 0 |
| 累计练习天数 | 整数 | 0 |

---

## 七、内容输入（P0：直接输入）

### 7.1 输入页面行为

**用户操作：** 在输入框中键入英文文本，点击"添加"。

**系统处理流程：**

```
用户提交文本
    │
    ▼
① 语言检测 ── 非英文？→ 提示"请输入英文内容"，不入库
    │ 是英文
    ▼
② 拆句 ── 将文本按句子边界拆分，每句作为一条独立语料
    │
    ▼
③ 去重 ── 与语料库已有内容比对
    │      ├── 完全重复 → 提示"这句话已在语料库中"，不重复入库
    │      └── 不重复 → 继续
    ▼
④ 预处理 ── 对每条语料执行：
    │   a. 难度评定（L1-L5）
    │   b. 断句标记（意群边界）
    │   c. 音频生成（慢速 0.75x / 常速 1.0x / 快速 1.25x）
    │   d. 中文释义生成
    │   e. 语音现象标注（连读/弱读/省音）
    │   f. 主题标签识别
    │
    ▼
⑤ 预览确认 ── 展示处理结果，用户确认后正式存入语料库
```

### 7.2 输入确认页面

展示预处理结果，用户可以在此页面：

- 查看每条拆分后的句子及其难度评定
- 试听生成的音频
- 修改系统识别的主题标签
- 删除不想要的句子
- 确认入库 / 取消

### 7.3 难度评定标准

| 等级 | 词汇范围 | 句长 | 句式 | 示例 |
|------|---------|------|------|------|
| L1 | 高频 1000 词 | ≤5 词 | 简单陈述/疑问 | "How are you doing?" |
| L2 | 高频 2000 词 | 6-10 词 | 含一个从句或介词短语 | "I'd like to order a coffee, please." |
| L3 | 高频 4000 词 | 11-18 词 | 复合句/被动语态 | "The project was delayed because we underestimated the complexity." |
| L4 | 含专业/低频词 | 19-25 词 | 多重从句/虚拟语气 | "Had I known about the change, I would have adjusted the schedule." |
| L5 | 含学术/生僻词 | >25 词 | 长难句/书面化表达 | 学术论述、正式演讲段落 |

评定取最高命中维度。例：句子只有 8 个词（L2），但含低频专业词汇（L4），则评定为 L4。

### 7.4 边界情况处理

| 情况 | 处理方式 |
|------|---------|
| 用户输入空文本 | 按钮置灰，不可提交 |
| 用户输入纯中文 | 提示"请输入英文内容" |
| 用户输入中英混合 | 提取英文部分处理，忽略中文 |
| 用户输入单个词 | 正常处理，标记为 L1，提示"建议输入完整句子以获得更好的练习效果" |
| 输入内容超过 500 词 | 正常拆句处理，预览页面分页展示 |
| 预处理失败（如音频生成异常） | 文本先入库标记为"待处理"，后台重试，成功后通知用户 |

---

## 八、每日练习计划

### 8.1 生成时机

- **自动生成：** 每日凌晨 4:00 自动生成当日计划
- **手动刷新：** 用户可在今日练习页面手动触发重新生成（每日限 3 次）
- **用户新增材料后：** 如果当日计划尚未开始练习，且用户新增了语料，自动将新语料纳入当日计划末尾

### 8.2 计划编排规则

每日计划由 **复习材料** + **新材料** 组成。

**第一步：确定总量**

| 用户设定时长 | 每条材料预估用时 | 计划总条数 |
|------------|----------------|----------|
| 10 分钟 | 约 2 分钟/条 | 5 条 |
| 20 分钟 | 约 2 分钟/条 | 10 条 |
| 30 分钟 | 约 2 分钟/条 | 15 条 |

**第二步：填入复习材料（优先）**

从语料库中筛选满足以下条件的材料：

- 状态为"学习中"
- 当前日期 ≥ 该材料的下次复习日期

按复习紧迫度排序（逾期天数越多越优先），依次填入计划。

如果复习材料数量已超过计划总条数，全部填入（允许当日计划超出预设时长）。复习不可被压缩。

**第三步：填入新材料（剩余名额）**

计划总条数 - 已填入的复习条数 = 新材料名额

从语料库中筛选满足以下条件的材料：

1. 状态为"未学习"
2. 难度 ≤ 用户当前等级 + 1（不允许超过两级）
3. 优先选取输入时间最近的（新鲜感驱动学习动力）
4. 同主题材料优先聚合

如果"未学习"的库存不足，剩余名额留空（不用冷启动语料强行填充已有用户的计划）。

**第四步：排序**

最终计划的排列顺序：

1. 复习材料在前，新材料在后
2. 复习材料内部：按难度从低到高
3. 新材料内部：同主题相邻，难度从低到高

### 8.3 间隔复习时间表

| 复习次序 | 距上次学习/复习的间隔 | 累计天数 |
|---------|-------------------|---------|
| 第 1 次复习 | 1 天 | 第 1 天 |
| 第 2 次复习 | 2 天 | 第 3 天 |
| 第 3 次复习 | 4 天 | 第 7 天 |
| 第 4 次复习 | 7 天 | 第 14 天 |
| 第 5 次复习 | 16 天 | 第 30 天 |
| 第 6 次复习 | 30 天 | 第 60 天 |
| 此后 | 每 60 天 | 持续 |

**间隔重置规则：** 任意一次复习中"表现不佳"（见 6.5），该材料的复习次序重置为 0，从第 1 天重新开始。

### 8.4 计划为空的处理

| 情况 | 处理方式 |
|------|---------|
| 语料库为空（新用户未输入过内容） | 引导进入"冷启动语料包选择"页面 |
| 语料库有内容但全部已掌握，且无到期复习 | 展示"今日无练习任务"，引导用户添加新素材 |
| 仅有复习材料，无新材料 | 正常展示复习计划，底部提示"添加新素材让明天的练习更丰富" |

---

## 九、六阶段练习流程（核心）

每条材料进入练习后，按以下六个阶段顺序执行。阶段不可跳过，不可乱序。

### 9.0 总览

```
阶段一         阶段二       阶段三         阶段四            阶段五         阶段六
理解     →    精听    →   同步跟读   →   影子跟读     →   脱稿复述   →   自由表达
Comprehension  Listening  Sync Reading    Shadowing       Reproduction   Free Expression
───────────   ─────────  ────────────   ─────────────    ────────────   ────────────────
不出声         不出声      首次出声        核心训练          脱离音频        脱离原文
看文本+释义    听音频      看文本+听音频    文本逐步消失       只看中文提示     只看主题提示
                         系统录音         系统录音          系统录音        系统录音
```

### 9.1 阶段一：理解（Comprehension）

**目的：** 消除语义障碍。确保用户在开口之前已经知道这句话"说的是什么"。

**页面内容：**
- 英文原文（大字展示）
- 中文释义
- 关键词汇/表达高亮，点击可展开释义
- 语音现象标注（如 "want to → wanna"，"going to → gonna"）

**用户操作：**
- 阅读内容
- 点击"已理解，下一步" → 进入阶段二

**对复习材料的简化：** 如果该材料已被完整练习过至少 1 次（非首次学习），此阶段只展示英文原文，底部小字显示中文释义，用户点击"记得，继续"即可快速通过。

**验收标准：**
- 首次学习：必须展示完整的释义和标注内容
- 复习：可快速通过，但仍必须经过此页面（不可直接跳到阶段二）
- 无"跳过"按钮

### 9.2 阶段二：精听（Deep Listening）

**目的：** 用耳朵建立对这句话声音轮廓的整体印象——语速、语调走势、重音分布、节奏型。不开口。

**页面内容：**
- 英文原文（可选显示/隐藏，默认显示）
- 播放按钮 + 音频进度条
- 已听次数计数器

**用户操作：**
- 点击播放按钮，音频以常速播放
- 可反复播放
- 点击"准备好了" → 进入阶段三

**防草率跳过机制：**
- 如果用户听了 ≤1 遍就点击"准备好了"，弹出轻提示："建议至少听 2 遍，留意语调和节奏"，用户可选择"继续听"或"我已熟悉这句话，直接开始"

**验收标准：**
- 音频播放必须正常
- 至少播放完 1 遍完整音频后，"准备好了"按钮才可点击
- 听 ≤1 遍时有提示（非阻断式）

### 9.3 阶段三：同步跟读（Synchronized Reading）

**目的：** 用户第一次开口。看着文本、跟着音频同步朗读。难度最低，建立开口信心。

**页面内容：**
- 英文原文（完整显示，带断句标记指示停顿位置）
- 音频播放控件
- 录音状态指示器（红点闪烁）
- 当前轮次提示（"第 1 遍 · 慢速" / "第 2 遍 · 常速"）

**流程：**

| 轮次 | 音频速度 | 文本显示 | 录音 |
|------|---------|---------|------|
| 第 1 遍 | 慢速（0.75x） | 完整显示 | 是 |
| 第 2 遍 | 常速（1.0x） | 完整显示 | 是 |

每遍流程：
1. 系统播放音频，同时开始录音
2. 用户跟着音频同步朗读
3. 音频播放结束后，录音自动停止
4. 页面展示"回听"按钮，用户可回放刚才的录音
5. 用户点击"下一遍"或"继续下一阶段"

**通过条件：**
- 必须完成 2 遍（慢速 + 常速各 1 遍）
- 2 遍完成后，显示"进入下一阶段"按钮
- 同时显示"再练一遍（常速）"按钮，用户可自愿加练，上限 3 遍额外练习

**静音检测：**
- 如果一遍录音中检测到全程静音（用户没有出声），该遍不计入完成次数
- 弹出提示："没有检测到声音，请大声跟读。跟读时出声是练习有效的关键。"

**验收标准：**
- 慢速和常速各 1 遍完成后才能进入下阶段
- 录音可回放
- 静音录音不算有效完成

### 9.4 阶段四：影子跟读（Shadowing）—— 核心阶段

**目的：** 真正的影子跟读训练。用户在音频播放后短暂延迟开始复述，文本逐步减少直至消失，迫使用户依靠听觉驱动语言输出。

**这是整个产品最核心的环节，分 3 轮，难度递增。**

---

**第 1 轮：韵律跟读（Prosodic Shadowing）**

页面提示文字："不用说出每个词，跟着节奏和语调哼读就好"

| 要素 | 说明 |
|------|------|
| 音频速度 | 常速（1.0x） |
| 文本显示 | 完整显示 |
| 用户任务 | 模仿音频的节奏、语调、重音模式，可以含糊发声（mumbling） |
| 录音 | 是 |

流程：
1. 系统播放音频
2. 用户在听到声音后即刻开始哼读/模仿节奏
3. 录音自动停止
4. 展示"回听"按钮

---

**第 2 轮：部分遮盖跟读（Partial Shadowing）**

页面提示文字："文本中部分词已隐藏，边听边补全，完整说出整句"

| 要素 | 说明 |
|------|------|
| 音频速度 | 常速（1.0x） |
| 文本显示 | 关键实词被遮盖为下划线（功能词保留），遮盖比例约 40-60% |
| 用户任务 | 延迟约 1 秒后开始跟读，填补空白，完整说出整句 |
| 录音 | 是 |

遮盖规则：
- 保留的词：冠词、介词、连词、代词、be 动词（如 a, the, in, on, and, but, I, you, is, was）
- 遮盖的词：名词、动词原形、形容词、副词
- 示例：原文 "I couldn't agree more with your point" → 显示 "I _____ _____ more with your _____"

流程：
1. 系统播放音频
2. 用户延迟约 1 秒后开始跟读
3. 录音自动停止
4. 展示"回听"按钮，同时展示完整原文供对照

---

**第 3 轮：无文本跟读（Full Shadowing）**

页面提示文字："不看文本，完全跟着声音走"

| 要素 | 说明 |
|------|------|
| 音频速度 | 常速（1.0x） |
| 文本显示 | 不显示任何文本 |
| 用户任务 | 延迟 0.5-1 秒后完全跟读 |
| 录音 | 是 |

流程：
1. 页面只显示音频波形动画（无文本）
2. 系统播放音频
3. 用户跟读
4. 录音停止后，展示"回听"按钮和完整原文

---

**轮次间过渡：**
每轮结束后，展示：
- "回听我的录音"按钮
- "听原音频"按钮
- 用户可交替回放对比
- 点击"下一轮"进入下一轮

**回退机制：**
第 3 轮录音中如果检测到连续 3 秒以上静音（用户卡住了），在该轮结束后：
- 提示："这句有点难度，再来一遍带文本的？"
- 用户选择"好的，回到第 2 轮" → 重做第 2 轮和第 3 轮
- 或选择"没关系，继续" → 正常进入阶段五

**通过条件：**
- 3 轮全部完成
- 回退后重做的轮次也算完成

**验收标准：**
- 3 轮的文本显示逻辑必须正确（完整→部分遮盖→无文本）
- 遮盖规则按词性执行
- 静音检测触发回退建议
- 每轮都有录音可回放

### 9.5 阶段五：脱稿复述（Reproduction）

**目的：** 从"跟着音频说"过渡到"自己说"。不播放音频，不显示英文，用户凭记忆复述。

**页面内容：**
- 中文释义（作为意义提示）
- 录音按钮
- 不显示英文原文，不自动播放音频

**流程：**

| 步骤 | 说明 |
|------|------|
| 1 | 页面展示中文释义，提示"请用英文说出这句话" |
| 2 | 用户点击录音按钮 → 开始录音 |
| 3 | 用户凭记忆说出英文内容 |
| 4 | 用户点击停止 → 录音结束 |
| 5 | 展示英文原文，用户自行对比 |
| 6 | 播放一遍原音频供对照 |
| 7 | 用户自评（见下方） |

**用户自评选项：**

| 选项 | 含义 | 系统行为 |
|------|------|---------|
| "说得不错" | 核心内容和关键表达基本正确 | 正常记录，继续下一阶段 |
| "还行，有些地方不准" | 大意对了，部分词句有偏差 | 正常记录，继续下一阶段 |
| "差距较大" | 说不出来或偏差很大 | 记录为"表现不佳"，继续下一阶段 |

自评数据用于掌握度判定和复习间隔计算。

**验收标准：**
- 在用户完成录音前，不可展示英文原文
- 自评选项必须出现且必须选择一个才能继续
- 自评结果影响复习间隔（"差距较大"触发间隔重置）

### 9.6 阶段六：自由表达（Free Expression）

**目的：** 从模仿走向自主输出。给一个相关的表达场景，用户用自己的话说。

**页面内容：**
- 表达提示（由系统根据当前材料生成）
- 录音按钮
- 不显示原文，不播放音频

**表达提示生成规则：**
基于当前材料的语义，生成一个开放式表达任务。提示必须与材料的核心表达相关，但不是让用户背诵原文。

| 材料原文 | 生成的表达提示 |
|---------|-------------|
| "I couldn't agree more with your point." | "请表达你对某件事的强烈赞同" |
| "Let me walk you through the process." | "请向某人解释一个流程的开头该怎么说" |
| "The deadline has been pushed back to Friday." | "请用英文告诉同事一个时间变更" |

**流程：**

| 步骤 | 说明 |
|------|------|
| 1 | 展示表达提示 |
| 2 | 用户点击录音按钮 → 开始录音 |
| 3 | 用户自由表达 |
| 4 | 用户点击停止 → 录音结束 |
| 5 | 展示"回听"按钮 |
| 6 | 用户点击"完成本条练习" → 该材料练习结束 |

**设计要点：**
- 这个阶段**没有对错判定**，不展示"正确答案"
- 目的是鼓励用户开口
- 即使用户只说了几个词，只要录音非静音，就算完成

**验收标准：**
- 表达提示与材料语义相关
- 录音完成后即可结束本条材料练习
- 无正确/错误判定

### 9.7 单条材料练习完成后

一条材料的六阶段全部完成后：

1. 展示简要总结卡片：
   - "本条练习完成"
   - 显示该材料的原文
   - 可快速回放阶段四第 3 轮的录音（最有代表性的一段）
2. 如果今日计划中还有下一条材料：
   - 显示"下一条"按钮 → 进入下一条材料的阶段一
3. 如果今日计划全部完成：
   - 进入"今日小结"页面

### 9.8 中途退出处理

| 情况 | 处理 |
|------|------|
| 用户在某条材料的中途退出 | 该材料本次练习进度不保存，下次需要重新从阶段一开始 |
| 用户完成了部分材料后退出 | 已完成的材料正常记录，未开始的材料留在今日计划中 |
| 用户当天没有完成全部计划 | 未完成的材料不顺延到第二天，但如果是复习材料，会在后续重新排入 |

---

## 十、录音与反馈

### 10.1 录音范围

| 阶段 | 是否录音 | 录音段数 |
|------|---------|---------|
| 阶段一：理解 | 否 | 0 |
| 阶段二：精听 | 否 | 0 |
| 阶段三：同步跟读 | 是 | 2 段（慢速 1 + 常速 1，不含加练） |
| 阶段四：影子跟读 | 是 | 3 段（每轮 1 段） |
| 阶段五：脱稿复述 | 是 | 1 段 |
| 阶段六：自由表达 | 是 | 1 段 |

每条材料每次练习产生 **7 段录音**。

### 10.2 录音回放

**即时回放：** 每段录音完成后立即可回放。

**与原音频对比：** 在阶段三和阶段四中，回放时提供"听原音频"按钮，用户可交替播放自己的录音和原音频。

### 10.3 录音存储

- 每段录音关联到：用户 → 语料 → 练习记录 → 阶段 → 轮次
- 录音持久化保存在云端（R2 存储）
- 用户可在语料详情页面查看某条材料的所有历史录音（按日期排列）

### 10.4 静音检测

在所有需要录音的阶段，系统检测录音音量：

- 如果整段录音的音量低于阈值（判定为静音）：
  - 该段录音不计为有效完成
  - 弹出提示："没有检测到声音，请大声跟读"
  - 用户需要重新录制

---

## 十一、用户等级与进阶

### 11.1 水平测试（新用户）

**测试流程：**
1. 系统依次播放 8 个句子，难度从 L1 递增到 L5（L1 × 1, L2 × 2, L3 × 2, L4 × 2, L5 × 1）
2. 每个句子播放 2 遍，用户跟读，系统录音
3. 每句跟读后，用户自评："跟得上"或"有困难"
4. 连续 2 句评为"有困难"时，测试提前结束
5. 初始等级 = 最后一个评为"跟得上"的句子所在等级

**测试结果映射：**

| 场景 | 初始等级 |
|------|---------|
| L1 就评为有困难 | L1 |
| L1、L2 跟得上，L3 有困难 | L2 |
| 全部跟得上 | L5 |

### 11.2 等级进阶规则

```
触发条件（全部满足）：
  ① 当前等级的材料累计已掌握 ≥ 20 条
  ② 最近 7 天每日计划完成率 > 80%（完成率 = 当日完成条数 / 当日计划总条数）

触发动作：
  → 系统开始在每日计划中混入约 20% 的 [当前等级+1] 材料

正式升级条件（全部满足）：
  ③ 连续 5 天混入的高等级材料完成率 > 70%

升级动作：
  → 用户等级 +1
  → 新等级的材料成为每日计划的主体
```

### 11.3 等级回退保护

```
触发条件：
  连续 3 天每日计划完成率 < 50%

动作：
  → 不降低用户等级（等级只升不降，避免挫败感）
  → 当日新材料数量减半
  → 增加低一级的复习材料填充空位
  → 展示鼓励提示："最近内容有点难度，我们多巩固一下基础"
```

### 11.4 硬性约束

**用户当前等级为 Ln 时，每日计划中不允许出现 L(n+2) 及以上的新材料。**

- 例：用户等级 L2，计划中最多出现 L3 的新材料，不会出现 L4/L5
- 用户自行输入的 L4/L5 材料存在语料库中，但标记为"当前等级不适合，升级后解锁"
- 复习材料不受此限（用户已经学过的高难度材料仍按间隔复习）

---

## 十二、新用户引导

### 12.1 完整引导流程

```
步骤 1：欢迎页
  → "每天 15 分钟，用影子跟读法练出自然的英语口语"
  → 点击"开始"

步骤 2：水平测试（详见 11.1）
  → 完成后展示结果："你的起始等级是 L2"

步骤 3：每日时长设定
  → 三选一：10 分钟 / 20 分钟 / 30 分钟
  → 下方说明每个选项对应的大致练习量

步骤 4：首批内容输入
  → 提示"添加你想练习的英文内容（至少 3 条）"
  → 提供输入框 + 示例建议
  → 如果用户暂时想不出来，可点击"先用推荐素材开始"→ 进入冷启动语料包选择

步骤 5：首次练习体验
  → 从刚输入的内容中选取最简单的 1 条
  → 带详细引导文字完成一次完整的六阶段练习
  → 每个阶段开始前展示说明："这一步的目的是……你需要做的是……"

步骤 6：引导完成
  → "准备好了！明天系统会为你生成完整的练习计划"
  → 进入首页
```

### 12.2 冷启动语料包

系统预置多个主题语料包，每个包含 20-30 条句子：

| 语料包名称 | 内容示例 |
|-----------|---------|
| 日常对话 | 问候、天气、兴趣爱好 |
| 职场英语 | 会议用语、邮件表达、工作汇报 |
| 旅行出行 | 问路、点餐、住宿、机场 |
| 自我介绍 | 个人背景、职业经历、兴趣特长 |

用户可选择 1-3 个语料包导入。导入后的材料与用户自己输入的内容同等对待。

---

## 十三、学习进度与数据展示

### 13.1 今日小结页面

当日所有计划条目完成后展示：

| 数据项 | 说明 |
|-------|------|
| 完成条数 | "今天练习了 8 条" |
| 练习时长 | "共用时 18 分钟" |
| 新学 / 复习 | "5 条新内容 + 3 条复习" |
| 连续天数 | "已连续练习 12 天" |

### 13.2 进度总览页面（个人中心）

| 数据区域 | 展示内容 |
|---------|---------|
| 打卡日历 | 按月展示，有练习的日期标记 |
| 连续记录 | 当前连续天数 / 历史最长连续天数 |
| 语料库统计 | 总量 / 未学习 / 学习中 / 已掌握（数值 + 占比） |
| 等级进度 | 当前等级 + 距离下一等级的进度条 |
| 各等级分布 | L1-L5 各有多少条已掌握 |

### 13.3 打卡规则

- 当天完成 ≥1 条材料的完整六阶段练习 → 视为当天已打卡
- 仅输入内容但未练习 → 不算打卡
- 某天未打卡 → 连续天数归零，但累计天数继续计算

---

## 十四、设置项

| 设置项 | 选项 | 默认值 | 说明 |
|-------|------|-------|------|
| 每日练习时长 | 10 / 20 / 30 分钟 | 引导时选择 | 影响每日计划条目数 |
| 手动调整等级 | L1-L5 | 测试结果 | 允许用户手动覆盖系统评定，但弹出提示"等级影响每日材料难度，建议根据实际水平选择" |
| 精听提醒 | 开 / 关 | 开 | 阶段二听 ≤1 遍就继续时是否提醒 |
| 每日提醒 | 开 / 关 + 时间 | 关 | 到时间推送"今日练习已就绪" |

---

## 十五、硬性产品规则汇总

以下规则贯穿所有功能设计，不可违反：

| 编号 | 规则 | 关联原则 |
|------|------|---------|
| R1 | 每条材料的跟读练习前必须经过理解阶段 | P1 |
| R2 | 六个阶段必须按顺序完成，不可跳过、不可乱序 | P1, P2 |
| R3 | 阶段三至阶段六必须录音，静音录音不算有效完成 | P4 |
| R4 | 不推送超出用户当前等级 +1 的新材料 | P1 |
| R5 | 阶段四的第 1 轮必须是韵律跟读，先于完整跟读 | P2 |
| R6 | 单条材料在阶段三中最多额外加练 3 遍 | P3 |
| R7 | 复习表现不佳时，间隔重置为第 1 天 | P1 |
| R8 | 所有用户输入的文本永久保存，不自动删除 | — |
| R9 | 每条材料练习的最后阶段必须是自由表达 | P5 |
| R10 | 每日计划中复习材料优先于新材料，复习不可被压缩 | P3 |
